---
uid: whitepapers/mvc4-release-notes
title: ASP.NET MVC 4 | Microsoft Docs
author: rick-anderson
description: "本文件說明 ASP.NET MVC 4 的版本。"
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/09/2011
ms.topic: article
ms.assetid: f014524f-25c0-4094-b8e1-886d99536f00
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /whitepapers/mvc4-release-notes
msc.type: content
ms.openlocfilehash: 399fbe3fa1e71a9ffa7c5e6dfeca7ccab7294d1b
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/24/2018
---
<a name="aspnet-mvc-4"></a><span data-ttu-id="61d96-103">ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="61d96-103">ASP.NET MVC 4</span></span>
====================
> <span data-ttu-id="61d96-104">本文件說明 ASP.NET MVC 4 的版本。</span><span class="sxs-lookup"><span data-stu-id="61d96-104">This document describes the release of ASP.NET MVC 4 .</span></span>


- [<span data-ttu-id="61d96-105">安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="61d96-105">Installation Notes</span></span>](#_Toc303253802)
- [<span data-ttu-id="61d96-106">文件 (英文)</span><span class="sxs-lookup"><span data-stu-id="61d96-106">Documentation</span></span>](#_Toc303253803)
- [<span data-ttu-id="61d96-107">支援</span><span class="sxs-lookup"><span data-stu-id="61d96-107">Support</span></span>](#_Toc303253804)
- [<span data-ttu-id="61d96-108">軟體需求</span><span class="sxs-lookup"><span data-stu-id="61d96-108">Software Requirements</span></span>](#_Toc303253805)
- [<span data-ttu-id="61d96-109">ASP.NET MVC 4 的新功能</span><span class="sxs-lookup"><span data-stu-id="61d96-109">New Features in ASP.NET MVC 4</span></span>](#_Toc303253807)

    - [<span data-ttu-id="61d96-110">ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="61d96-110">ASP.NET Web API</span></span>](#_Toc317096197)
    - [<span data-ttu-id="61d96-111">預設專案範本的增強功能</span><span class="sxs-lookup"><span data-stu-id="61d96-111">Enhancements to Default Project Templates</span></span>](#_Toc303253808)
    - [<span data-ttu-id="61d96-112">行動裝置的專案範本</span><span class="sxs-lookup"><span data-stu-id="61d96-112">Mobile Project Template</span></span>](#_Toc303253809)
    - [<span data-ttu-id="61d96-113">顯示模式</span><span class="sxs-lookup"><span data-stu-id="61d96-113">Display Modes</span></span>](#_Toc303253810)
    - [<span data-ttu-id="61d96-114">jQuery Mobile，檢視切換程式，並覆寫瀏覽器</span><span class="sxs-lookup"><span data-stu-id="61d96-114">jQuery Mobile, the View Switcher, and Browser Overriding</span></span>](#_Toc303253811)
    - [<span data-ttu-id="61d96-115">非同步控制器的工作支援</span><span class="sxs-lookup"><span data-stu-id="61d96-115">Task Support for Asynchronous Controllers</span></span>](#_Toc303253813)
    - [<span data-ttu-id="61d96-116">Azure SDK</span><span class="sxs-lookup"><span data-stu-id="61d96-116">Azure SDK</span></span>](#_Toc303253814)
    - [<span data-ttu-id="61d96-117">資料庫移轉</span><span class="sxs-lookup"><span data-stu-id="61d96-117">Database Migrations</span></span>](#_Toc303253818)
    - [<span data-ttu-id="61d96-118">空白專案範本</span><span class="sxs-lookup"><span data-stu-id="61d96-118">Empty Project Template</span></span>](#_Toc303253819)
    - [<span data-ttu-id="61d96-119">將控制器加入的任何專案資料夾</span><span class="sxs-lookup"><span data-stu-id="61d96-119">Add Controller to any project folder</span></span>](#_Toc303253820)
    - [<span data-ttu-id="61d96-120">統合和縮製</span><span class="sxs-lookup"><span data-stu-id="61d96-120">Bundling and Minification</span></span>](#_Toc303253821)
    - [<span data-ttu-id="61d96-121">啟用從 Facebook 和其他站台使用 OAuth 和 OpenID 登入</span><span class="sxs-lookup"><span data-stu-id="61d96-121">Enabling Logins from Facebook and Other Sites Using OAuth and OpenID</span></span>](#_Toc303253822)
- [<span data-ttu-id="61d96-122">ASP.NET MVC 3 專案升級至 ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="61d96-122">Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4</span></span>](#_Toc303253806)
- [<span data-ttu-id="61d96-123">從 ASP.NET MVC 4 發行候選版本變更</span><span class="sxs-lookup"><span data-stu-id="61d96-123">Changes from ASP.NET MVC 4 Release Candidate</span></span>](#_Toc303253817)
- [<span data-ttu-id="61d96-124">已知的問題和重大變更</span><span class="sxs-lookup"><span data-stu-id="61d96-124">Known Issues and Breaking Changes</span></span>](#_Toc303253815)

<a id="_Toc303253802"></a>
## <a name="installation-notes"></a><span data-ttu-id="61d96-125">安裝注意事項</span><span class="sxs-lookup"><span data-stu-id="61d96-125">Installation Notes</span></span>

<span data-ttu-id="61d96-126">可以從安裝 ASP.NET MVC 4 for Visual Studio 2010 [ASP.NET MVC 4 首頁](../mvc/mvc4.md)使用 Web Platform Installer。</span><span class="sxs-lookup"><span data-stu-id="61d96-126">ASP.NET MVC 4 for Visual Studio 2010 can be installed from the [ASP.NET MVC 4 home page](../mvc/mvc4.md) using the Web Platform Installer.</span></span>

<span data-ttu-id="61d96-127">我們建議您解除安裝 ASP.NET MVC 4 再安裝 ASP.NET MVC 4 的任何先前安裝的預覽。</span><span class="sxs-lookup"><span data-stu-id="61d96-127">We recommend uninstalling any previously installed previews of ASP.NET MVC 4 prior to installing ASP.NET MVC 4.</span></span> <span data-ttu-id="61d96-128">您可以與 ASP.NET MVC 4 升級的 ASP.NET MVC 4 Beta 和發行候選版本，卻不用解除安裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-128">You can upgrade the ASP.NET MVC 4 Beta and Release Candidate to ASP.NET MVC 4 without uninstalling.</span></span>

<span data-ttu-id="61d96-129">此版本不相容的任何發行前版本的.NET Framework 4.5。</span><span class="sxs-lookup"><span data-stu-id="61d96-129">This release is not compatible with any preview releases of .NET Framework 4.5.</span></span> <span data-ttu-id="61d96-130">您個別必須升級至最終版本再安裝 ASP.NET MVC 4 的任何已安裝的預覽版本的.NET Framework 4.5。</span><span class="sxs-lookup"><span data-stu-id="61d96-130">You must separately upgrade the any installed preview releases of .NET Framework 4.5 to the final version prior to installing ASP.NET MVC 4.</span></span>

<span data-ttu-id="61d96-131">ASP.NET MVC 4 可以是已安裝並執行由並存使用 ASP.NET MVC 3。</span><span class="sxs-lookup"><span data-stu-id="61d96-131">ASP.NET MVC 4 can be installed and run side-by-side with ASP.NET MVC 3.</span></span>

<a id="_Toc303253803"></a>
## <a name="documentation"></a><span data-ttu-id="61d96-132">文件</span><span class="sxs-lookup"><span data-stu-id="61d96-132">Documentation</span></span>

<span data-ttu-id="61d96-133">ASP.NET mvc 的文件位於 MSDN 網站，位於下列 URL:</span><span class="sxs-lookup"><span data-stu-id="61d96-133">Documentation for ASP.NET MVC is available on the MSDN website at the following URL:</span></span>

[<span data-ttu-id="61d96-134">https://go.microsoft.com/fwlink/?LinkID=243043</span><span class="sxs-lookup"><span data-stu-id="61d96-134">https://go.microsoft.com/fwlink/?LinkID=243043</span></span>](https://go.microsoft.com/fwlink/?LinkID=243043)

<span data-ttu-id="61d96-135">教學課程和其他關於 ASP.NET MVC 的資訊位於 ASP.NET 網站的 MVC 4 頁 ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md))。</span><span class="sxs-lookup"><span data-stu-id="61d96-135">Tutorials and other information about ASP.NET MVC are available on the MVC 4 page of the ASP.NET website ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md)).</span></span>

<a id="_Toc303253804"></a>
## <a name="support"></a><span data-ttu-id="61d96-136">支援</span><span class="sxs-lookup"><span data-stu-id="61d96-136">Support</span></span>

<span data-ttu-id="61d96-137">完全支援 ASP.NET MVC 4。</span><span class="sxs-lookup"><span data-stu-id="61d96-137">ASP.NET MVC 4 is fully supported.</span></span> <span data-ttu-id="61d96-138">如果您有使用此版本的相關問題您也可以張貼它們至 ASP.NET MVC 論壇 ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx))，其中的 ASP.NET 社群成員可經常提供非正式的支援。</span><span class="sxs-lookup"><span data-stu-id="61d96-138">If you have questions about working with this release you can also post them to the ASP.NET MVC forum ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)), where members of the ASP.NET community are frequently able to provide informal support.</span></span>

<a id="_Toc303253805"></a>
## <a name="software-requirements"></a><span data-ttu-id="61d96-139">軟體需求</span><span class="sxs-lookup"><span data-stu-id="61d96-139">Software Requirements</span></span>

<span data-ttu-id="61d96-140">Visual Studio 的 ASP.NET MVC 4 元件需要 PowerShell 2.0 和 Service Pack 1 的 Visual Studio 2010 或 Visual Web Developer Express 2010 Service Pack 1。</span><span class="sxs-lookup"><span data-stu-id="61d96-140">The ASP.NET MVC 4 components for Visual Studio require PowerShell 2.0 and either Visual Studio 2010 with Service Pack 1 or Visual Web Developer Express 2010 with Service Pack 1.</span></span>

<a id="_Toc303253807"></a>
## <a name="new-features-in-aspnet-mvc-4"></a><span data-ttu-id="61d96-141">ASP.NET MVC 4 的新功能</span><span class="sxs-lookup"><span data-stu-id="61d96-141">New Features in ASP.NET MVC 4</span></span>

<span data-ttu-id="61d96-142">本節說明已引進的功能在 ASP.NET MVC 4 版本。</span><span class="sxs-lookup"><span data-stu-id="61d96-142">This section describes features that have been introduced in the ASP.NET MVC 4 release.</span></span>

<a id="_Toc317096197"></a>
### <a name="aspnet-web-api"></a><span data-ttu-id="61d96-143">ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="61d96-143">ASP.NET Web API</span></span>

<span data-ttu-id="61d96-144">ASP.NET MVC 4 包含 ASP.NET Web API，新的架構，用於建立可達到廣泛的包括瀏覽器和行動裝置的用戶端的 HTTP 服務。</span><span class="sxs-lookup"><span data-stu-id="61d96-144">ASP.NET MVC 4 includes ASP.NET Web API, a new framework for creating HTTP services that can reach a broad range of clients including browsers and mobile devices.</span></span> <span data-ttu-id="61d96-145">ASP.NET Web 應用程式開發介面也是用於建立 RESTful 服務的理想平台。</span><span class="sxs-lookup"><span data-stu-id="61d96-145">ASP.NET Web API is also an ideal platform for building RESTful services.</span></span>

<span data-ttu-id="61d96-146">ASP.NET Web API 包含下列功能的支援：</span><span class="sxs-lookup"><span data-stu-id="61d96-146">ASP.NET Web API includes support for the following features:</span></span>

- <span data-ttu-id="61d96-147">**現代 HTTP 程式設計模型：**直接存取及管理 HTTP 要求和回應您 Web 應用程式開發介面使用新的強型別 HTTP 物件模型。</span><span class="sxs-lookup"><span data-stu-id="61d96-147">**Modern HTTP programming model:** Directly access and manipulate HTTP requests and responses in your Web APIs using a new, strongly typed HTTP object model.</span></span> <span data-ttu-id="61d96-148">相同程式設計模型和 HTTP 管線是用戶端透過新的對稱可用*HttpClient*型別。</span><span class="sxs-lookup"><span data-stu-id="61d96-148">The same programming model and HTTP pipeline is symmetrically available on the client through the new *HttpClient* type.</span></span>
- <span data-ttu-id="61d96-149">**完整支援路由：** ASP.NET Web API 支援完整的 ASP.NET 路由，路由參數和條件約束包括的路由功能集。</span><span class="sxs-lookup"><span data-stu-id="61d96-149">**Full support for routes:** ASP.NET Web API supports the full set of route capabilities of ASP.NET Routing, including route parameters and constraints.</span></span> <span data-ttu-id="61d96-150">此外，使用簡單的慣例來對應至 HTTP 方法的動作。</span><span class="sxs-lookup"><span data-stu-id="61d96-150">Additionally, use simple conventions to map actions to HTTP methods.</span></span>
- <span data-ttu-id="61d96-151">**內容交涉：**用戶端和伺服器可一起運作來判斷正確的格式，從 web API 所傳回的資料。</span><span class="sxs-lookup"><span data-stu-id="61d96-151">**Content negotiation:** The client and server can work together to determine the right format for data being returned from a web API.</span></span> <span data-ttu-id="61d96-152">ASP.NET Web 應用程式開發介面支援預設 xml、 JSON 和表單 URL 編碼格式，而且您可以擴充此一支援藉由新增您自己的格式器，或甚至取代預設內容交涉的策略。</span><span class="sxs-lookup"><span data-stu-id="61d96-152">ASP.NET Web API provides default support for XML, JSON, and Form URL-encoded formats and you can extend this support by adding your own formatters, or even replace the default content negotiation strategy.</span></span>
- <span data-ttu-id="61d96-153">**模型繫結和驗證：**模型繫結器提供一個簡單的方式，從 HTTP 要求的各種組件中擷取資料，並將這些訊息部分轉換成.NET 物件可由 Web API 的動作。</span><span class="sxs-lookup"><span data-stu-id="61d96-153">**Model binding and validation:** Model binders provide an easy way to extract data from various parts of an HTTP request and convert those message parts into .NET objects which can be used by the Web API actions.</span></span> <span data-ttu-id="61d96-154">資料註解為基礎的動作參數也會執行驗證。</span><span class="sxs-lookup"><span data-stu-id="61d96-154">Validation is also performed on action parameters based on data annotations.</span></span>
- <span data-ttu-id="61d96-155">**篩選條件：** ASP.NET Web API 支援篩選器包括知名的篩選條件，例如*[Authorize]*屬性。</span><span class="sxs-lookup"><span data-stu-id="61d96-155">**Filters:** ASP.NET Web API supports filters including well-known filters such as the *[Authorize]* attribute.</span></span> <span data-ttu-id="61d96-156">您可以撰寫，並插入您自己的篩選動作、 授權和例外狀況處理。</span><span class="sxs-lookup"><span data-stu-id="61d96-156">You can author and plug in your own filters for actions, authorization and exception handling.</span></span>
- <span data-ttu-id="61d96-157">**在查詢組合：**使用*[Queryable]*上傳回的動作篩選條件屬性*IQueryable*可啟用查詢您的 web 應用程式開發介面透過 OData 查詢轉換的支援。</span><span class="sxs-lookup"><span data-stu-id="61d96-157">**Query composition:** Use the *[Queryable]* filter attribute on an action that returns *IQueryable* to enable support for querying your web API via the OData query conventions.</span></span>
- <span data-ttu-id="61d96-158">**改良的測試能力：**而不是靜態內容物件中設定 HTTP 詳細資料，web 應用程式開發介面執行工作的執行個體*HttpRequestMessage*和*HttpResponseMessage*。</span><span class="sxs-lookup"><span data-stu-id="61d96-158">**Improved testability:** Rather than setting HTTP details in static context objects, web API actions work with instances of *HttpRequestMessage* and *HttpResponseMessage*.</span></span> <span data-ttu-id="61d96-159">建立單元測試專案，以及您的 Web API 專案開始快速撰寫單元測試的 Web API 功能。</span><span class="sxs-lookup"><span data-stu-id="61d96-159">Create a unit test project along with your Web API project to get started quickly writing unit tests for your Web API functionality.</span></span>
- <span data-ttu-id="61d96-160">**程式碼為基礎的組態：**等作業只透過程式碼會完成的 ASP.NET Web API 設定、 清除離開您的組態檔。</span><span class="sxs-lookup"><span data-stu-id="61d96-160">**Code-based configuration:** ASP.NET Web API configuration is accomplished solely through code, leaving your config files clean.</span></span> <span data-ttu-id="61d96-161">您可以使用提供的服務定位程式模式來設定擴充性點。</span><span class="sxs-lookup"><span data-stu-id="61d96-161">Use the provided service locator pattern to configure extensibility points.</span></span>
- <span data-ttu-id="61d96-162">**改善的逆轉控制 (IoC) 容器的支援：** ASP.NET Web API IoC 容器透過改良的相依性解析程式的抽象提供絕佳的支援</span><span class="sxs-lookup"><span data-stu-id="61d96-162">**Improved support for Inversion of Control (IoC) containers:** ASP.NET Web API provides great support for IoC containers through an improved dependency resolver abstraction</span></span>
- <span data-ttu-id="61d96-163">**自我裝載：** Web Api 可以裝載於自己的處理序，除了 IIS 時仍在使用路由的完整功能及其他功能的 Web API。</span><span class="sxs-lookup"><span data-stu-id="61d96-163">**Self-host:** Web APIs can be hosted in your own process in addition to IIS while still using the full power of routes and other features of Web API.</span></span>
- <span data-ttu-id="61d96-164">**建立自訂的說明和測試頁：**您現在可以輕鬆地建置自訂說明及測試頁面為您的 web 應用程式開發介面使用新*IApiExplorer*服務以取得您的 web 應用程式開發介面的完整執行階段描述。</span><span class="sxs-lookup"><span data-stu-id="61d96-164">**Create custom help and test pages:** You now can easily build custom help and test pages for your web APIs by using the new *IApiExplorer* service to get a complete runtime description of your web APIs.</span></span>
- <span data-ttu-id="61d96-165">**監視和診斷：** ASP.NET Web API 現在提供輕量追蹤基礎結構，能輕鬆整合與現有的記錄解決方案，例如 System.Diagnostics、 ETW 和第三方記錄架構。</span><span class="sxs-lookup"><span data-stu-id="61d96-165">**Monitoring and diagnostics:** ASP.NET Web API now provides light weight tracing infrastructure that makes it easy to integrate with existing logging solutions such as System.Diagnostics, ETW and third party logging frameworks.</span></span> <span data-ttu-id="61d96-166">您可以藉由啟用追蹤*ITraceWriter*實作，並將其加入您的 web API 組態。</span><span class="sxs-lookup"><span data-stu-id="61d96-166">You can enable tracing by providing an *ITraceWriter* implementation and adding it to your web API configuration.</span></span>
- <span data-ttu-id="61d96-167">**連結產生：**使用 ASP.NET Web API *UrlHelper*產生相同的應用程式中的相關資源的連結。</span><span class="sxs-lookup"><span data-stu-id="61d96-167">**Link generation:** Use the ASP.NET Web API *UrlHelper* to generate links to related resources in the same application.</span></span>
- <span data-ttu-id="61d96-168">**Web API 專案範本：**選取新的 Web API 專案表單在新的 MVC 4 專案精靈快速啟動並執行與 ASP.NET Web API。</span><span class="sxs-lookup"><span data-stu-id="61d96-168">**Web API project template:** Select the new Web API project form the New MVC 4 Project wizard to quickly get up and running with ASP.NET Web API.</span></span>
- <span data-ttu-id="61d96-169">**Scaffolding:**使用**加入控制器**快速 scaffold Entity Framework 為基礎的 web API 控制器的對話方塊架構的模型型別。</span><span class="sxs-lookup"><span data-stu-id="61d96-169">**Scaffolding:** Use the **Add Controller** dialog to quickly scaffold a web API controller based on an Entity Framework based model type.</span></span>

<span data-ttu-id="61d96-170">如需 ASP.NET Web API 的詳細資訊，請造訪[https://www.asp.net/web-api](../web-api/index.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-170">For more details on ASP.NET Web API please visit [https://www.asp.net/web-api](../web-api/index.md).</span></span>

<a id="_Toc303253808"></a>
### <a name="enhancements-to-default-project-templates"></a><span data-ttu-id="61d96-171">預設專案範本的增強功能</span><span class="sxs-lookup"><span data-stu-id="61d96-171">Enhancements to Default Project Templates</span></span>

<span data-ttu-id="61d96-172">已更新用來建立新的 ASP.NET MVC 4 專案的範本來建立更現代尋找網站：</span><span class="sxs-lookup"><span data-stu-id="61d96-172">The template that is used to create new ASP.NET MVC 4 projects has been updated to create a more modern-looking website:</span></span>

![](mvc4-release-notes/_static/image1.png)

<span data-ttu-id="61d96-173">除了外觀的增強功能，已改善功能的新範本。</span><span class="sxs-lookup"><span data-stu-id="61d96-173">In addition to cosmetic improvements, there's improved functionality in the new template.</span></span> <span data-ttu-id="61d96-174">範本會使用稱為調整看來，桌面瀏覽器和行動裝置沒有任何自訂的瀏覽器中呈現的技術。</span><span class="sxs-lookup"><span data-stu-id="61d96-174">The template employs a technique called adaptive rendering to look good in both desktop browsers and mobile browsers without any customization.</span></span>

![](mvc4-release-notes/_static/image2.png)

<span data-ttu-id="61d96-175">若要查看作用中的適應性呈現，您可以使用行動裝置的模擬器，或只要再試一次調整大小較小的桌面瀏覽器視窗。</span><span class="sxs-lookup"><span data-stu-id="61d96-175">To see adaptive rendering in action, you can use a mobile emulator or just try resizing the desktop browser window to be smaller.</span></span> <span data-ttu-id="61d96-176">當瀏覽器視窗中取得夠小時，將變更的頁面配置。</span><span class="sxs-lookup"><span data-stu-id="61d96-176">When the browser window gets small enough, the layout of the page will change.</span></span>

<a id="_Toc303253809"></a>
### <a name="mobile-project-template"></a><span data-ttu-id="61d96-177">行動裝置的專案範本</span><span class="sxs-lookup"><span data-stu-id="61d96-177">Mobile Project Template</span></span>

<span data-ttu-id="61d96-178">如果您開始新的專案，並想要建立站台專為行動和平板電腦瀏覽器，您可以使用新的行動應用程式專案範本。</span><span class="sxs-lookup"><span data-stu-id="61d96-178">If you're starting a new project and want to create a site specifically for mobile and tablet browsers, you can use the new Mobile Application project template.</span></span> <span data-ttu-id="61d96-179">這根據 jQuery Mobile，用於建置觸控最佳化 UI 的開放原始碼程式庫：</span><span class="sxs-lookup"><span data-stu-id="61d96-179">This is based on jQuery Mobile, an open-source library for building touch-optimized UI:</span></span>

![](mvc4-release-notes/_static/image3.png)

<span data-ttu-id="61d96-180">此範本包含網際網路應用程式範本相同的應用程式結構 （而且控制器的程式碼幾乎完全相同），但卻能呈現最佳效果，並能在觸控式行動裝置的行為使用 jQuery Mobile 的樣式。</span><span class="sxs-lookup"><span data-stu-id="61d96-180">This template contains the same application structure as the Internet Application template (and the controller code is virtually identical), but it's styled using jQuery Mobile to look good and behave well on touch-based mobile devices.</span></span> <span data-ttu-id="61d96-181">若要了解有關如何在結構和樣式行動 UI 的詳細資訊，請參閱[jQuery 行動專案網站](http://jquerymobile.com/)。</span><span class="sxs-lookup"><span data-stu-id="61d96-181">To learn more about how to structure and style mobile UI, see the [jQuery Mobile project website](http://jquerymobile.com/).</span></span>

<span data-ttu-id="61d96-182">如果您已經有您想要加入，行動裝置最佳化的檢視，或如果您想要建立單一站台提供不同樣式桌上型電腦和行動瀏覽器來檢視桌面導向網站，您可以使用新的顯示模式功能。</span><span class="sxs-lookup"><span data-stu-id="61d96-182">If you already have a desktop-oriented site that you want to add mobile-optimized views to, or if you want to create a single site that serves differently styled views to desktop and mobile browsers, you can use the new Display Modes feature.</span></span> <span data-ttu-id="61d96-183">（請參閱下一節）。</span><span class="sxs-lookup"><span data-stu-id="61d96-183">(See the next section.)</span></span>

<a id="_Toc303253810"></a>
### <a name="display-modes"></a><span data-ttu-id="61d96-184">顯示模式</span><span class="sxs-lookup"><span data-stu-id="61d96-184">Display Modes</span></span>

<span data-ttu-id="61d96-185">新的顯示模式功能可讓應用程式選取依提出要求的瀏覽器的檢視。</span><span class="sxs-lookup"><span data-stu-id="61d96-185">The new Display Modes feature lets an application select views depending on the browser that's making the request.</span></span> <span data-ttu-id="61d96-186">例如，如果桌面瀏覽器要求在首頁上，應用程式可能會使用 Views\Home\Index.cshtml 範本。</span><span class="sxs-lookup"><span data-stu-id="61d96-186">For example, if a desktop browser requests the Home page, the application might use the Views\Home\Index.cshtml template.</span></span> <span data-ttu-id="61d96-187">如果行動瀏覽器要求在首頁上，應用程式可能會傳回 Views\Home\Index.mobile.cshtml 範本。</span><span class="sxs-lookup"><span data-stu-id="61d96-187">If a mobile browser requests the Home page, the application might return the Views\Home\Index.mobile.cshtml template.</span></span>

<span data-ttu-id="61d96-188">版面配置和 partials 也會覆寫特定瀏覽器類型。</span><span class="sxs-lookup"><span data-stu-id="61d96-188">Layouts and partials can also be overridden for particular browser types.</span></span> <span data-ttu-id="61d96-189">例如: </span><span class="sxs-lookup"><span data-stu-id="61d96-189">For example:</span></span>

- <span data-ttu-id="61d96-190">如果同時 Views\Shared 資料夾包含\_Layout.cshtml 和\_Layout.mobile.cshtml 範本，應用程式會使用預設\_行動瀏覽器和要求期間Layout.mobile.cshtml\_Layout.cshtml 期間其他要求。</span><span class="sxs-lookup"><span data-stu-id="61d96-190">If your Views\Shared folder contains both the \_Layout.cshtml and \_Layout.mobile.cshtml templates, by default the application will use \_Layout.mobile.cshtml during requests from mobile browsers and \_Layout.cshtml during other requests.</span></span>
- <span data-ttu-id="61d96-191">如果資料夾包含同時\_MyPartial.cshtml 和\_MyPartial.mobile.cshtml，指示@Html.Partial("\_MyPartial") 會轉譯\_MyPartial.mobile.cshtml 期間從行動裝置的要求瀏覽器和\_MyPartial.cshtml 期間其他要求。</span><span class="sxs-lookup"><span data-stu-id="61d96-191">If a folder contains both \_MyPartial.cshtml and \_MyPartial.mobile.cshtml, the instruction @Html.Partial("\_MyPartial") will render \_MyPartial.mobile.cshtml during requests from mobile browsers, and \_MyPartial.cshtml during other requests.</span></span>

<span data-ttu-id="61d96-192">如果您想要建立更詳細的檢視、 配置、 或其他裝置的部分檢視，您可以註冊新*DefaultDisplayMode*指定的名稱： 要求符合特定條件時，要搜尋的執行個體。</span><span class="sxs-lookup"><span data-stu-id="61d96-192">If you want to create more specific views, layouts, or partial views for other devices, you can register a new *DefaultDisplayMode* instance to specify which name to search for when a request satisfies particular conditions.</span></span> <span data-ttu-id="61d96-193">例如，您可以加入下列程式碼加入*應用程式\_啟動*Global.asax 檔案以登錄為適用於 Apple iPhone 瀏覽器提出要求時的顯示模式的字串"iPhone"中的方法：</span><span class="sxs-lookup"><span data-stu-id="61d96-193">For example, you could add the following code to the *Application\_Start* method in the Global.asax file to register the string "iPhone" as a display mode that applies when the Apple iPhone browser makes a request:</span></span>

[!code-csharp[Main](mvc4-release-notes/samples/sample1.cs)]

<span data-ttu-id="61d96-194">執行此程式碼，當提出要求時 Apple iPhone 瀏覽器之後，您的應用程式都會使用 _layout.cshtml\\_Layout.iPhone.cshtml 配置 （如果有的話）。</span><span class="sxs-lookup"><span data-stu-id="61d96-194">After this code runs, when an Apple iPhone browser makes a request, your application will use the Views\Shared\\_Layout.iPhone.cshtml layout (if it exists).</span></span> <span data-ttu-id="61d96-195">如需有關顯示模式的詳細資訊，請參閱[ASP.NET MVC 4 行動功能](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-195">For more information on Display Mode, see [ASP.NET MVC 4 Mobile Features](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md).</span></span> <span data-ttu-id="61d96-196">使用 DisplayModeProvider 應用程式應該安裝[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-196">Applications using DisplayModeProvider should install the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package.</span></span> <span data-ttu-id="61d96-197">[ASP.NET 改 2012 Update](https://go.microsoft.com/fwlink/?LinkID=271322)包含[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)新的專案範本中的 NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-197">The [ASP.NET Fall 2012 Update](https://go.microsoft.com/fwlink/?LinkID=271322) includes the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package in the new project templates.</span></span> <span data-ttu-id="61d96-198">請參閱[ASP.NET MVC 4 行動快取 Bug Fixedd](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx)如修正程式的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="61d96-198">See [ASP.NET MVC 4 Mobile Caching Bug Fixedd](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span>

<a id="_Toc303253811"></a>
### <a name="jquery-mobile-and-mobile-features"></a><span data-ttu-id="61d96-199">jQuery Mobile 和行動功能</span><span class="sxs-lookup"><span data-stu-id="61d96-199">jQuery Mobile and Mobile Features</span></span>

<span data-ttu-id="61d96-200">如需建置 ASP.NET MVC 4 行動應用程式使用 jQuery Mobile，請參閱本教學課程[ASP.NET MVC 4 行動功能](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-200">For information on building Mobile applications with ASP.NET MVC 4 using jQuery Mobile, see the tutorial [ASP.NET MVC 4 Mobile Features](../mvc/overview/older-versions/aspnet-mvc-4-mobile-features.md).</span></span>

<a id="_Toc303253813"></a>
### <a name="task-support-for-asynchronous-controllers"></a><span data-ttu-id="61d96-201">非同步控制器的工作支援</span><span class="sxs-lookup"><span data-stu-id="61d96-201">Task Support for Asynchronous Controllers</span></span>

<span data-ttu-id="61d96-202">現在您可以撰寫非同步動作方法為單一方法的傳回型別的物件*工作*或*工作&lt;ActionResult&gt;*。</span><span class="sxs-lookup"><span data-stu-id="61d96-202">You can now write asynchronous action methods as single methods that return an object of type *Task* or *Task&lt;ActionResult&gt;*.</span></span>

 <span data-ttu-id="61d96-203">如需詳細資訊，請參閱[使用 ASP.NET MVC 4 中的非同步方法](../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-203">For more information see [Using Asynchronous Methods in ASP.NET MVC 4](../mvc/overview/performance/using-asynchronous-methods-in-aspnet-mvc-4.md).</span></span>

<a id="_Toc303253814"></a>
### <a name="azure-sdk"></a><span data-ttu-id="61d96-204">Azure SDK</span><span class="sxs-lookup"><span data-stu-id="61d96-204">Azure SDK</span></span>

<span data-ttu-id="61d96-205">ASP.NET MVC 4 支援的 Windows Azure sdk 1.6 版及較新版本。</span><span class="sxs-lookup"><span data-stu-id="61d96-205">ASP.NET MVC 4 supports the 1.6 and newer releases of the Windows Azure SDK.</span></span>

<a id="_Toc303253818"></a>
### <a name="database-migrations"></a><span data-ttu-id="61d96-206">資料庫移轉</span><span class="sxs-lookup"><span data-stu-id="61d96-206">Database Migrations</span></span>

<span data-ttu-id="61d96-207">ASP.NET MVC 4 專案現在包含 Entity Framework 5。</span><span class="sxs-lookup"><span data-stu-id="61d96-207">ASP.NET MVC 4 projects now include Entity Framework 5.</span></span> <span data-ttu-id="61d96-208">資料庫移轉的支援其中一個 Entity Framework 5 中強大的功能。</span><span class="sxs-lookup"><span data-stu-id="61d96-208">One of the great features in Entity Framework 5 is support for database migrations.</span></span> <span data-ttu-id="61d96-209">這項功能可讓您輕鬆地發展您的資料庫結構描述，使用程式碼為重心的移轉，同時保留資料庫中的資料。</span><span class="sxs-lookup"><span data-stu-id="61d96-209">This feature enables you to easily evolve your database schema using a code-focused migration while preserving the data in the database.</span></span> <span data-ttu-id="61d96-210">如需有關資料庫移轉的詳細資訊，請參閱[影片模型和資料表中加入新欄位](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table.md)中[ASP.NET MVC 4 教學課程簡介](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-210">For more information on database migrations, see [Adding a New Field to the Movie Model and Table](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table.md) in the [Introduction to ASP.NET MVC 4 tutorial](../mvc/overview/older-versions/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4.md).</span></span>

<a id="_Toc303253819"></a>
### <a name="empty-project-template"></a><span data-ttu-id="61d96-211">空白專案範本</span><span class="sxs-lookup"><span data-stu-id="61d96-211">Empty Project Template</span></span>

<span data-ttu-id="61d96-212">空白的 MVC 專案範本現在是真的空的，如此您可以從完全從頭開始。</span><span class="sxs-lookup"><span data-stu-id="61d96-212">The MVC Empty project template is now truly empty so that you can start from a completely clean slate.</span></span> <span data-ttu-id="61d96-213">舊版的空白專案範本已重新命名為 Basic。</span><span class="sxs-lookup"><span data-stu-id="61d96-213">The earlier version of the Empty project template has been renamed to Basic.</span></span>

<a id="_Toc303253820"></a>
### <a name="add-controller-to-any-project-folder"></a><span data-ttu-id="61d96-214">將控制器加入的任何專案資料夾</span><span class="sxs-lookup"><span data-stu-id="61d96-214">Add Controller to any project folder</span></span>

<span data-ttu-id="61d96-215">您現在可以以滑鼠右鍵按一下並選取**加入控制器**MVC 專案中的任何資料夾中。</span><span class="sxs-lookup"><span data-stu-id="61d96-215">You can now right click and select **Add Controller** from any folder in your MVC project.</span></span> <span data-ttu-id="61d96-216">這可讓您更大的彈性來組織您的控制站，但想，包括讓您 MVC 和 Web API 的控制站維持在個別的資料夾。</span><span class="sxs-lookup"><span data-stu-id="61d96-216">This gives you more flexibility to organize your controllers however you want, including keeping your MVC and Web API controllers in separate folders.</span></span>

<a id="_Toc303253821"></a>
### <a name="bundling-and-minification"></a><span data-ttu-id="61d96-217">統合及縮製</span><span class="sxs-lookup"><span data-stu-id="61d96-217">Bundling and Minification</span></span>

<span data-ttu-id="61d96-218">統合及縮製的架構可讓您減少必須結合成單一的配套的檔案，以指令碼和 CSS 的個別檔案，藉此網頁的 HTTP 要求的數目。</span><span class="sxs-lookup"><span data-stu-id="61d96-218">The bundling and minification framework enables you to reduce the number of HTTP requests that a Web page needs to make by combining individual files into a single, bundled file for scripts and CSS.</span></span> <span data-ttu-id="61d96-219">它接著可以縮短組合內容，以減少這些要求的整體大小。</span><span class="sxs-lookup"><span data-stu-id="61d96-219">It can then reduce the overall size of those requests by minifying the contents of the bundle.</span></span> <span data-ttu-id="61d96-220">縮短可以包含像是消除空白處，縮短於甚至摺疊的 CSS 選取器根據其語意的變數名稱的活動。</span><span class="sxs-lookup"><span data-stu-id="61d96-220">Minifying can include activities like eliminating whitespace to shortening variable names to even collapsing CSS selectors based on their semantics.</span></span> <span data-ttu-id="61d96-221">組合所宣告，且設定程式碼並容易參照透過 helper 方法會產生任何檢視中組合的單一連結，或偵錯時，多個連結的組合的個別內容。</span><span class="sxs-lookup"><span data-stu-id="61d96-221">Bundles are declared and configured in code and are easily referenced in views via helper methods which can generate either a single link to the bundle or, when debugging, multiple links to the individual contents of the bundle.</span></span> <span data-ttu-id="61d96-222">如需詳細資訊，請參閱[組合和縮製](../mvc/overview/performance/bundling-and-minification.md)。</span><span class="sxs-lookup"><span data-stu-id="61d96-222">For more information see [Bundling and Minification](../mvc/overview/performance/bundling-and-minification.md).</span></span>

<a id="_Toc303253822"></a>
### <a name="enabling-logins-from-facebook-and-other-sites-using-oauth-and-openid"></a><span data-ttu-id="61d96-223">啟用從 Facebook 和其他站台使用 OAuth 和 OpenID 登入</span><span class="sxs-lookup"><span data-stu-id="61d96-223">Enabling Logins from Facebook and Other Sites Using OAuth and OpenID</span></span>

<span data-ttu-id="61d96-224">ASP.NET MVC 4 網際網路專案範本中的預設範本現在包含支援 OAuth 和 OpenID 登入使用 DotNetOpenAuth 程式庫。</span><span class="sxs-lookup"><span data-stu-id="61d96-224">The default templates in ASP.NET MVC 4 Internet Project template now includes support for OAuth and OpenID login using the DotNetOpenAuth library.</span></span> <span data-ttu-id="61d96-225">如需設定的 OAuth 或 OpenID 提供者資訊，請參閱[WebForms、 MVC 和網頁的 OAuth/OpenID 支援](https://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)和[OAuth 和 OpenID 功能文件中 ASP.NET Web Pages](../web-pages/overview/releases/top-features-in-web-pages-2.md#oauthsetup)。</span><span class="sxs-lookup"><span data-stu-id="61d96-225">For information on configuring an OAuth or OpenID provider, see [OAuth/OpenID Support for WebForms, MVC and WebPages](https://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx) and the [OAuth and OpenID feature documentation in ASP.NET Web Pages](../web-pages/overview/releases/top-features-in-web-pages-2.md#oauthsetup).</span></span>

<a id="_Toc303253806"></a>
## <a name="upgrading-an-aspnet-mvc-3-project-to-aspnet-mvc-4"></a><span data-ttu-id="61d96-226">ASP.NET MVC 3 專案升級至 ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="61d96-226">Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4</span></span>

<span data-ttu-id="61d96-227">ASP.NET MVC 4 可以在同一部電腦，讓您彈性選擇何時要升級至 ASP.NET MVC 4 的 ASP.NET MVC 3 應用程式的 ASP.NET MVC 3 並存安裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-227">ASP.NET MVC 4 can be installed side by side with ASP.NET MVC 3 on the same computer, which gives you flexibility in choosing when to upgrade an ASP.NET MVC 3 application to ASP.NET MVC 4.</span></span>

<span data-ttu-id="61d96-228">升級的最簡單方式是建立新的 ASP.NET MVC 4 專案，並複製所有的檢視、 控制器、 程式碼和內容檔案從現有的 MVC 3 專案加入新的專案，然後更新組件參考來比對所有非 MVC 範本的新的專案中您使用 cluded assembiles。</span><span class="sxs-lookup"><span data-stu-id="61d96-228">The simplest way to upgrade is to create a new ASP.NET MVC 4 project and copy all the views, controllers, code, and content files from the existing MVC 3 project to the new project and then to update the assembly references in the new project to match any non-MVC template included assembiles you are using.</span></span> <span data-ttu-id="61d96-229">如果您已經變更 MVC 3 專案中的 Web.config 檔案，您也必須合併那些變更成 MVC 4 專案中的 Web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="61d96-229">If you have made changes to the Web.config file in the MVC 3 project, you must also merge those changes into the Web.config file in the MVC 4 project.</span></span>

<span data-ttu-id="61d96-230">若要手動升級現有的 ASP.NET MVC 3 應用程式第 4 版，執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="61d96-230">To manually upgrade an existing ASP.NET MVC 3 application to version 4, do the following:</span></span>

1. <span data-ttu-id="61d96-231">在所有的 Web.config 檔案在專案中 （有一個根目錄中的專案在 [檢視] 資料夾中，一個在您的專案中的每個區域的 [檢視] 資料夾中），取代下列文字的每個執行個體 (注意： System.Web.WebPages，Version = 1.0.0.0 找不到建立專案與 Visual Studio 2012）：</span><span class="sxs-lookup"><span data-stu-id="61d96-231">In all Web.config files in the project (there is one in the root of the project, one in the Views folder, and one in the Views folder for each area in your project), replace every instance of the following text (note: System.Web.WebPages, Version=1.0.0.0 is not found in projects created with Visual Studio 2012):</span></span> 

    [!code-console[Main](mvc4-release-notes/samples/sample2.cmd)]

    <span data-ttu-id="61d96-232">使用下列相對應的文字：</span><span class="sxs-lookup"><span data-stu-id="61d96-232">with the following corresponding text:</span></span>

    [!code-console[Main](mvc4-release-notes/samples/sample3.cmd)]
2. <span data-ttu-id="61d96-233">在根 Web.config 檔案中，更新*webPages:Version* "2.0.0.0"的項目並加入新*PreserveLoginUrl*具有值"true"的機碼：</span><span class="sxs-lookup"><span data-stu-id="61d96-233">In the root Web.config file, update the *webPages:Version* element to "2.0.0.0" and add a new *PreserveLoginUrl* key that has the value "true":</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample4.xml)]
3. <span data-ttu-id="61d96-234">在方案總管 中，參考上按一下滑鼠右鍵，然後選取管理 NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-234">In Solution Explorer, right-click on the References and select Manage NuGet Packages.</span></span> <span data-ttu-id="61d96-235">在左窗格中，選取**Online\NuGet 官方套件來源**，然後更新下列：</span><span class="sxs-lookup"><span data-stu-id="61d96-235">In the left pane, select **Online\NuGet official package source**, then update the following:</span></span>

    - <span data-ttu-id="61d96-236">ASP.NET MVC 4</span><span class="sxs-lookup"><span data-stu-id="61d96-236">ASP.NET MVC 4</span></span>
    - <span data-ttu-id="61d96-237">（選擇性） jQuery、 jQuery 驗證與 jQuery UI</span><span class="sxs-lookup"><span data-stu-id="61d96-237">(Optional) jQuery, jQuery Validation and jQuery UI</span></span>
    - <span data-ttu-id="61d96-238">（選擇性）Entity Framework</span><span class="sxs-lookup"><span data-stu-id="61d96-238">(Optional) Entity Framework</span></span>
    - <span data-ttu-id="61d96-239">(Optonal)Modernizr</span><span class="sxs-lookup"><span data-stu-id="61d96-239">(Optonal) Modernizr</span></span>
4. <span data-ttu-id="61d96-240">在 方案總管 中，以滑鼠右鍵按一下專案名稱，然後選取 卸載專案。</span><span class="sxs-lookup"><span data-stu-id="61d96-240">In Solution Explorer, right-click the project name and then select Unload Project.</span></span> <span data-ttu-id="61d96-241">然後名稱上按一下滑鼠右鍵，然後選取 編輯*ProjectName*.csproj。</span><span class="sxs-lookup"><span data-stu-id="61d96-241">Then right-click the name again and select Edit *ProjectName*.csproj.</span></span>
5. <span data-ttu-id="61d96-242">找出*ProjectTypeGuids*項目和取代 {E53F8FEA-EAE0-44A6-8774-FFD645390401} {E3E379DF-F4C6-4180-9B81-6769533ABE47}。</span><span class="sxs-lookup"><span data-stu-id="61d96-242">Locate the *ProjectTypeGuids* element and replace {E53F8FEA-EAE0-44A6-8774-FFD645390401} with {E3E379DF-F4C6-4180-9B81-6769533ABE47}.</span></span>
6. <span data-ttu-id="61d96-243">儲存的變更，關閉您所編輯的專案 (.csproj) 檔案、 以滑鼠右鍵按一下專案，然後選取重新載入專案。</span><span class="sxs-lookup"><span data-stu-id="61d96-243">Save the changes, close the project (.csproj) file you were editing, right-click the project, and then select Reload Project.</span></span>
7. <span data-ttu-id="61d96-244">如果專案參考任何協力廠商程式庫編譯使用舊版 ASP.NET MVC，請開啟根 Web.config 檔案，並加入下列三個*bindingRedirect*下的項目*組態*> 一節：</span><span class="sxs-lookup"><span data-stu-id="61d96-244">If the project references any third-party libraries that are compiled using previous versions of ASP.NET MVC, open the root Web.config file and add the following three *bindingRedirect* elements under the *configuration* section:</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample5.xml)]

<a id="_Toc303253817"></a>
## <a name="changes-from-aspnet-mvc-4-release-candidate"></a><span data-ttu-id="61d96-245">從 ASP.NET MVC 4 發行候選版本變更</span><span class="sxs-lookup"><span data-stu-id="61d96-245">Changes from ASP.NET MVC 4 Release Candidate</span></span>

<span data-ttu-id="61d96-246">ASP.NET MVC 4 發行候選版本資訊可以在這裡找到：</span><span class="sxs-lookup"><span data-stu-id="61d96-246">The release notes for ASP.NET MVC 4 Release Candidate can be found  here:</span></span>

<span data-ttu-id="61d96-247">以下摘要說明此版本中從 ASP.NET MVC 4 發行候選版本的重大變更：</span><span class="sxs-lookup"><span data-stu-id="61d96-247">The major changes from ASP.NET MVC 4 Release Candidate in this release are summarized below:</span></span>

- <span data-ttu-id="61d96-248">**每個控制站組態：** ASP.NET Web API 控制器可以以自訂屬性來實作屬性*IControllerConfiguration*設定他們自己的格式器、 動作選取器和參數繫結器.</span><span class="sxs-lookup"><span data-stu-id="61d96-248">**Per controller configuration:** ASP.NET Web API controllers can be attributed with a custom attribute that implements *IControllerConfiguration* to setup their own formatters, action selector and parameter binders.</span></span> <span data-ttu-id="61d96-249">*HttpControllerConfigurationAttribute*已移除。</span><span class="sxs-lookup"><span data-stu-id="61d96-249">The *HttpControllerConfigurationAttribute* has been removed.</span></span>
- <span data-ttu-id="61d96-250">**每個路由訊息處理常式：**您現在可以指定給定路由的要求鏈結中的最後一個訊息處理常式。</span><span class="sxs-lookup"><span data-stu-id="61d96-250">**Per route message handlers:** You can now specify the final message handler in the request chain for a given route.</span></span> <span data-ttu-id="61d96-251">這可讓支援使用路由來分派到他們自己的賽車沿著架構 (非*IHttpController*) 端點。</span><span class="sxs-lookup"><span data-stu-id="61d96-251">This enables support for ride-along frameworks to use routing to dispatch to their own (non-*IHttpController*) endpoints.</span></span>
- <span data-ttu-id="61d96-252">**進度通知：** *ProgressMessageHandler*產生要求實體正在上傳和下載的回應實體的進度通知。</span><span class="sxs-lookup"><span data-stu-id="61d96-252">**Progress notifications:** The *ProgressMessageHandler* generates progress notification for both request entities being uploaded and response entities being downloaded.</span></span> <span data-ttu-id="61d96-253">使用這個處理常式就可以是追蹤的幅度您要上傳要求主體，或下載的回應主體。</span><span class="sxs-lookup"><span data-stu-id="61d96-253">Using this handler it is possible to keep track of how far you are uploading a request body or downloading a response body.</span></span>
- <span data-ttu-id="61d96-254">**內容推播：** *PushStreamContent*類別可讓您希望直接寫入要求或回應 （同步或非同步方式） 使用資料流資料 producer 狀況。</span><span class="sxs-lookup"><span data-stu-id="61d96-254">**Push content:** The *PushStreamContent* class enables scenarios where a data producer wants to write directly to the request or response(either synchronously or asynchronously) using a stream.</span></span> <span data-ttu-id="61d96-255">當*PushStreamContent*已準備好接受它呼叫動作委派與輸出資料流的資料。</span><span class="sxs-lookup"><span data-stu-id="61d96-255">When the *PushStreamContent* is ready to accept data it calls out to an action delegate with the output stream.</span></span> <span data-ttu-id="61d96-256">開發人員可以再寫入資料流的資料流時寫入只要必要和關閉已完成。</span><span class="sxs-lookup"><span data-stu-id="61d96-256">The developer can then write to the stream for as long as necessary and close the stream when writing has completed.</span></span> <span data-ttu-id="61d96-257">*PushStreamContent*偵測到資料流的結尾，並完成基礎非同步*工作*如寫出內容。</span><span class="sxs-lookup"><span data-stu-id="61d96-257">The *PushStreamContent* detects the closing of the stream and completes the underlying asynchronous *Task* for writing out the content.</span></span>
- <span data-ttu-id="61d96-258">**建立錯誤回應：**使用*HttpError*要以一致的方式代表錯誤的資訊從例如驗證錯誤和例外狀況時仍接受型別*IncludeErrorDetailPolicy*.</span><span class="sxs-lookup"><span data-stu-id="61d96-258">**Creating error responses:** Use the *HttpError* type to consistently represent error information from such as validation errors and exceptions while still honoring the *IncludeErrorDetailPolicy*.</span></span> <span data-ttu-id="61d96-259">使用新*CreateErrorResponse*擴充方法，以輕鬆地建立錯誤回應的*HttpError*做為內容。</span><span class="sxs-lookup"><span data-stu-id="61d96-259">Use the new *CreateErrorResponse* extension methods to easily create error responses with *HttpError* as content.</span></span> <span data-ttu-id="61d96-260">*HttpError*內容是完全內容交涉。</span><span class="sxs-lookup"><span data-stu-id="61d96-260">The *HttpError* content is fully content negotiated.</span></span>
- <span data-ttu-id="61d96-261">**移除 MediaRangeMapping:**媒體類型的範圍現在會由預設的內容交涉器。</span><span class="sxs-lookup"><span data-stu-id="61d96-261">**MediaRangeMapping removed:** Media type ranges are now handled by the default content negotiator.</span></span>
- <span data-ttu-id="61d96-262">**簡單的型別參數的預設參數繫結現在是 [FromUri]:**在舊版的預設參數繫結使用簡單的型別參數的模型繫結的 ASP.NET Web API。</span><span class="sxs-lookup"><span data-stu-id="61d96-262">**Default parameter binding for simple type parameters is now [FromUri]:** In previous releases of ASP.NET Web API the default parameter binding for simple type parameters used model binding.</span></span> <span data-ttu-id="61d96-263">現在是簡單的型別參數的預設參數繫結*[FromUri]*。</span><span class="sxs-lookup"><span data-stu-id="61d96-263">The default parameter binding for simple type parameters is now *[FromUri]*.</span></span>
- <span data-ttu-id="61d96-264">**動作選取接受必要的參數：**動作選取 ASP.NET Web API 中的將現在只選取動作若未提供所有必要的參數來自 URI。</span><span class="sxs-lookup"><span data-stu-id="61d96-264">**Action selection honors required parameters:** Action selection in ASP.NET Web API will now only select an action if all required parameters that come from the URI are provided.</span></span> <span data-ttu-id="61d96-265">可以藉由提供動作方法簽章中的引數的預設值，指定的參數為選擇性。</span><span class="sxs-lookup"><span data-stu-id="61d96-265">A parameter can be specified as optional by providing a default value for the argument in the action method signature.</span></span>
- <span data-ttu-id="61d96-266">**自訂 HTTP 參數繫結：**使用*ParameterBindingAttribute*自訂特定動作參數的參數繫結，或使用*ParameterBindingRules*上*HttpConfiguration*自訂參數繫結更廣泛。</span><span class="sxs-lookup"><span data-stu-id="61d96-266">**Customize HTTP parameter bindings:** Use the *ParameterBindingAttribute* to customize the parameter binding for a specific action parameter or use the *ParameterBindingRules* on the *HttpConfiguration* to customize parameter bindings more broadly.</span></span>
- <span data-ttu-id="61d96-267">**MediaTypeFormatter 增強功能：**格式器現在可以存取完整*HttpContent*執行個體。</span><span class="sxs-lookup"><span data-stu-id="61d96-267">**MediaTypeFormatter improvements:** Formatters now have access to the full *HttpContent* instance.</span></span>
- <span data-ttu-id="61d96-268">**緩衝原則選取的主機：**實作和設定*IHostBufferPolicySelector*服務的 ASP.NET Web API，來讓主機判斷緩衝時要使用的原則。</span><span class="sxs-lookup"><span data-stu-id="61d96-268">**Host buffering policy selection:** Implement and configure the *IHostBufferPolicySelector* service in ASP.NET Web API to enable hosts to determine the policy for when buffering is to be used.</span></span>
- <span data-ttu-id="61d96-269">**主機無從驗證的方式存取用戶端憑證：**使用*GetClientCertificate*從要求訊息中取得提供用戶端憑證的擴充方法。</span><span class="sxs-lookup"><span data-stu-id="61d96-269">**Access client certificates in a host agnostic manner:** Use the *GetClientCertificate* extension method to get the supplied client certificate from the request message.</span></span>
- <span data-ttu-id="61d96-270">**內容交涉擴充性：**由衍生自自訂內容交涉*DefaultContentNegotiator*和覆寫您想要的內容交涉的任何層面。</span><span class="sxs-lookup"><span data-stu-id="61d96-270">**Content negotiation extensibility:** Customize content negotiation by deriving from the *DefaultContentNegotiator* and overriding any aspect of content negotiation that you would like.</span></span>
- <span data-ttu-id="61d96-271">**傳回 406 無法接受回應的支援：**您現在可以傳回 406 無法接受回應 ASP.NET Web API 中藉由建立找不到適合的格式器時*DefaultContentNegotiator*與*excludeMatchOnTypeOnly*參數設定為*true*。</span><span class="sxs-lookup"><span data-stu-id="61d96-271">**Support for returning 406 Not Acceptable responses:** You can now return 406 Not Acceptable responses in ASP.NET Web API when a suitable formatter is not found by creating a *DefaultContentNegotiator* with the *excludeMatchOnTypeOnly* parameter set to *true*.</span></span>
- <span data-ttu-id="61d96-272">**表單資料讀取為 NameValueCollection 或 JToken:**可以讀取 URI 查詢字串中，或為要求主體中的表單資料*NameValueCollection*使用*ParseQueryString*和*ReadAsFormDataAsync*擴充方法分別。</span><span class="sxs-lookup"><span data-stu-id="61d96-272">**Read form data as NameValueCollection or JToken:** You can read form data in the URI query string or in the request body as a *NameValueCollection* using the *ParseQueryString* and *ReadAsFormDataAsync* extension methods respectively.</span></span> <span data-ttu-id="61d96-273">同樣地，您可以讀取 URI 查詢字串中，或為要求主體中的表單資料*JToken*使用*TryReadQueryAsJson*和*ReadAsAsync*&lt;T&gt;擴充方法分別。</span><span class="sxs-lookup"><span data-stu-id="61d96-273">Similarly, you can read form data in the URI query string or in the request body as a *JToken* using the *TryReadQueryAsJson* and *ReadAsAsync*&lt;T&gt; extension methods respectively.</span></span>
- <span data-ttu-id="61d96-274">**多部分的增強功能：**就可以撰寫*MultipartStreamProvider* ，完全適合的可讀取並以最佳方式向使用者呈現結果 MIME 多組件資料類型。</span><span class="sxs-lookup"><span data-stu-id="61d96-274">**Multipart improvements:** It is now possible to write a *MultipartStreamProvider* that is completely tailored to the type of MIME multipart data that it can read and present the result in the optimal way to the user.</span></span> <span data-ttu-id="61d96-275">您也可以攔截的後置處理步驟上*MultipartStreamProvider* ，允許實作進行任何後置處理它想 MIME 多組件主體組件。</span><span class="sxs-lookup"><span data-stu-id="61d96-275">You can also hook a post processing step on the *MultipartStreamProvider* that allows the implementation to do whatever post processing it wants on the MIME multipart body parts.</span></span> <span data-ttu-id="61d96-276">例如， *MultipartFormDataStreamProvider*實作讀取 HTML 表單資料組件，並將它們加入至*NameValueCollection*因此可輕鬆地在收到呼叫端。</span><span class="sxs-lookup"><span data-stu-id="61d96-276">For example, the *MultipartFormDataStreamProvider* implementation reads the HTML form data parts and adds them to a *NameValueCollection* so they are easy to get at from the caller.</span></span>
- <span data-ttu-id="61d96-277">**連結產生的改進：** *UrlHelper*不再相依於*HttpControllerContext*。</span><span class="sxs-lookup"><span data-stu-id="61d96-277">**Link generation improvements:** The *UrlHelper* no longer depends on *HttpControllerContext*.</span></span> <span data-ttu-id="61d96-278">您現在可以存取*UrlHelper*從任何內容位置*HttpRequestMessage*可用。</span><span class="sxs-lookup"><span data-stu-id="61d96-278">You can now access the *UrlHelper* from any context where the *HttpRequestMessage* is available.</span></span>
- <span data-ttu-id="61d96-279">**訊息處理常式執行順序變更：**它們都以反向順序設定而不是按順序來立即執行訊息處理常式。</span><span class="sxs-lookup"><span data-stu-id="61d96-279">**Message handler execution order change:** Message handlers are now executed in the order that they are configured instead of in reverse order.</span></span>
- <span data-ttu-id="61d96-280">**訊息處理常式連接 helper:**新*HttpClientFactory* ，可以連接*DelegatingHandlers*並建立*HttpClient*與想要的管線準備就緒。</span><span class="sxs-lookup"><span data-stu-id="61d96-280">**Helper for wiring up message handlers:** The new *HttpClientFactory* that can wire up *DelegatingHandlers* and create an *HttpClient* with the desired pipeline ready to go.</span></span> <span data-ttu-id="61d96-281">它也提供連接的替代的內部處理常式的功能 (預設值是*HttpClientHandler*)，以及使用時，請勿將連接*HttpMessageInvoker*或另一個*DelegatingHandler*而不是*HttpClient*做為 top 啟動程式。</span><span class="sxs-lookup"><span data-stu-id="61d96-281">It also provides functionality for wiring up with alternative inner handlers (the default is *HttpClientHandler*) as well as do the wiring up when using *HttpMessageInvoker* or another *DelegatingHandler* instead of *HttpClient* as the top-invoker.</span></span>
- <span data-ttu-id="61d96-282">**支援在 ASP.NET 網頁最佳化 Cdn:** ASP.NET 網頁最佳化現在支援的 CDN 替代路徑，讓您指定每個組合額外的 URL 會指向該內容傳遞網路上的相同資源。</span><span class="sxs-lookup"><span data-stu-id="61d96-282">**Support for CDNs in ASP.NET Web Optimization:** ASP.NET Web Optimization now provides support for CDN alternate paths enabling you to specify for each bundle an additional URL which points to that same resource on a content delivery network.</span></span> <span data-ttu-id="61d96-283">支援 Cdn 可讓您取得您指令碼和樣式組合地理位置較接近結束取用者的 Web 應用程式。</span><span class="sxs-lookup"><span data-stu-id="61d96-283">Supporting CDNs enables you to get your script and style bundles geographically closer to the end consumers of your Web applications.</span></span>
- <span data-ttu-id="61d96-284">**ASP.NET Web API 路由並設定移至*WebApiConfig.Register*可以是 resused 測試程式碼中的靜態方法。**</span><span class="sxs-lookup"><span data-stu-id="61d96-284">**ASP.NET Web API routes and configuration moved to *WebApiConfig.Register* static method that can be resused in test code.**</span></span> <span data-ttu-id="61d96-285">ASP.NET Web API 路由先前已加入*RouteConfig.RegisterRoutes*以及標準的 MVC 路由傳送。</span><span class="sxs-lookup"><span data-stu-id="61d96-285">ASP.NET Web API routes previously were added in *RouteConfig.RegisterRoutes* along with the standard MVC routes.</span></span> <span data-ttu-id="61d96-286">ASP.NET Web API 路由的預設和組態現在處理在個別*WebApiConfig.Register*以促進測試方法。</span><span class="sxs-lookup"><span data-stu-id="61d96-286">The default ASP.NET Web API routes and configuration are now handled in a separate *WebApiConfig.Register* method to facilitate testing.</span></span>

<a id="_Toc303253815"></a>
## <a name="known-issues-and-breaking-changes"></a><span data-ttu-id="61d96-287">已知的問題和重大變更</span><span class="sxs-lookup"><span data-stu-id="61d96-287">Known Issues and Breaking Changes</span></span>

- <span data-ttu-id="61d96-288">**ASP.NET MVC 4 的 RC 和 RTM 版本不正確地傳回快取的桌面檢視時應傳回行動檢視。**</span><span class="sxs-lookup"><span data-stu-id="61d96-288">**The RC and RTM version of ASP.NET MVC 4 incorrectly returned cached desktop views when mobile views should be returned.**</span></span>

    - <span data-ttu-id="61d96-289">請參閱[ASP.NET MVC 4 行動快取 Bug 固定](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx)如修正程式的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="61d96-289">See [ASP.NET MVC 4 Mobile Caching Bug Fixed](https://blogs.msdn.com/b/rickandy/archive/2012/09/17/asp-net-mvc-4-mobile-caching-bug-fixed.aspx) for details on the fix.</span></span> <span data-ttu-id="61d96-290">可以從安裝修正[固定 DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-290">The fix can be installed from the [Fixed DisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes) NuGet package.</span></span>
- <span data-ttu-id="61d96-291">**Razor 檢視引擎中的重大變更**。</span><span class="sxs-lookup"><span data-stu-id="61d96-291">**Breaking changes in the Razor View Engine**.</span></span> <span data-ttu-id="61d96-292">下列類型已從移除*System.Web.Mvc.Razor*:</span><span class="sxs-lookup"><span data-stu-id="61d96-292">The following types were removed from *System.Web.Mvc.Razor*:</span></span> 

    - <span data-ttu-id="61d96-293">*ModelSpan*</span><span class="sxs-lookup"><span data-stu-id="61d96-293">*ModelSpan*</span></span>
    - <span data-ttu-id="61d96-294">*MvcVBRazorCodeGenerator*</span><span class="sxs-lookup"><span data-stu-id="61d96-294">*MvcVBRazorCodeGenerator*</span></span>
    - <span data-ttu-id="61d96-295">*MvcCSharpRazorCodeGenerator*</span><span class="sxs-lookup"><span data-stu-id="61d96-295">*MvcCSharpRazorCodeGenerator*</span></span>
    - <span data-ttu-id="61d96-296">*MvcVBRazorCodeParser*</span><span class="sxs-lookup"><span data-stu-id="61d96-296">*MvcVBRazorCodeParser*</span></span>

 <span data-ttu-id="61d96-297">也已移除下列方法：</span><span class="sxs-lookup"><span data-stu-id="61d96-297">The following methods were also removed:</span></span> 

    - <span data-ttu-id="61d96-298">*MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span><span class="sxs-lookup"><span data-stu-id="61d96-298">*MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span></span>
    - <span data-ttu-id="61d96-299">*MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*</span><span class="sxs-lookup"><span data-stu-id="61d96-299">*MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*</span></span>
    - <span data-ttu-id="61d96-300">*MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span><span class="sxs-lookup"><span data-stu-id="61d96-300">*MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*</span></span>
- <span data-ttu-id="61d96-301">**當 WebMatrix.WebData.dll 隨附於 ASP.NET MVC 4 應用程式的 /bin 目錄中時，因此它會接管表單驗證的 URL。**</span><span class="sxs-lookup"><span data-stu-id="61d96-301">**When WebMatrix.WebData.dll is included in in the /bin directory of an ASP.NET MVC 4 apps, it takes over the URL for forms authentication.**</span></span> <span data-ttu-id="61d96-302">WebMatrix.WebData.dll 組件加入至應用程式 （例如，藉由使用 [新增可部署的相依性] 對話方塊時，請選取 「 ASP.NET Web 網頁使用 Razor 語法 」） 將會覆寫/帳戶/登入驗證登入重新導向而 /帳戶/登入以預期的 ASP.NET MVC 帳戶控制器的預設方式。</span><span class="sxs-lookup"><span data-stu-id="61d96-302">Adding the WebMatrix.WebData.dll assembly to your application (for example, by selecting "ASP.NET Web Pages with Razor Syntax" when using the Add Deployable Dependencies dialog) will override the authentication login redirect to /account/logon rather than /account/login as expected by the default ASP.NET MVC Account Controller.</span></span> <span data-ttu-id="61d96-303">要避免這種行為，並使用 web.config 的 [驗證] 區段中已指定的 URL，您可以加入稱為 PreserveLoginUrl appSetting 並將它設定為 true:</span><span class="sxs-lookup"><span data-stu-id="61d96-303">To prevent this behavior and use the URL specified already in the authentication section of web.config, you can add an appSetting called PreserveLoginUrl and set it to true:</span></span> 

    [!code-xml[Main](mvc4-release-notes/samples/sample6.xml)]
- <span data-ttu-id="61d96-304">**NuGet 套件管理員安裝嘗試安裝 ASP.NET MVC 4 的 Visual Studio 2010 和 Visual Web Developer 2010 的並存安裝時失敗。**</span><span class="sxs-lookup"><span data-stu-id="61d96-304">**The NuGet package manager fails to install when attempting to install ASP.NET MVC 4 for side by side installations of Visual Studio 2010 and Visual Web Developer 2010.**</span></span> <span data-ttu-id="61d96-305">若要執行 Visual Studio 2010 和 Visual Web Developer 2010 並存 ASP.NET MVC 4 中，您必須安裝 ASP.NET MVC 4 之後已安裝 Visual Studio 的兩個版本。</span><span class="sxs-lookup"><span data-stu-id="61d96-305">To run Visual Studio 2010 and Visual Web Developer 2010 side by side with ASP.NET MVC 4 you must install ASP.NET MVC 4 after both versions of Visual Studio have already been installed.</span></span>
- <span data-ttu-id="61d96-306">**如果已經已解除安裝先決條件，解除安裝 ASP.NET MVC 4 會失敗。**</span><span class="sxs-lookup"><span data-stu-id="61d96-306">**Uninstalling ASP.NET MVC 4 fails if prerequisites have already been uninstalled.**</span></span> <span data-ttu-id="61d96-307">若要完全解除安裝 ASP.NET MVC 4you 必須解除安裝 ASP.NET MVC 4，然後再解除安裝 Visual Studio。</span><span class="sxs-lookup"><span data-stu-id="61d96-307">To cleanly uninstall ASP.NET MVC 4you must uninstall ASP.NET MVC 4 prior to uninstalling Visual Studio.</span></span>
- <span data-ttu-id="61d96-308">**安裝 ASP.NET MVC 4 中斷 ASP.NET MVC 3 RTM 應用程式。**</span><span class="sxs-lookup"><span data-stu-id="61d96-308">**Installing ASP.NET MVC 4 breaks ASP.NET MVC 3 RTM applications.**</span></span> <span data-ttu-id="61d96-309">ASP.NET MVC 3 應用程式所建立 rtm 發行 (不能搭配[ASP.NET MVC 3 Tools Update](https://www.microsoft.com/download/details.aspx?id=1491)版本) 才能與 ASP.NET MVC 4 並存需要下列變更。</span><span class="sxs-lookup"><span data-stu-id="61d96-309">ASP.NET MVC 3 applications that were created with the RTM release (not with the [ASP.NET MVC 3 Tools Update](https://www.microsoft.com/download/details.aspx?id=1491) release) require the following changes in order to work side-by-side with ASP.NET MVC 4.</span></span> <span data-ttu-id="61d96-310">建置專案，而不需要進行這些更新的結果中的編譯錯誤。</span><span class="sxs-lookup"><span data-stu-id="61d96-310">Building the project without making these updates results in compilation errors.</span></span> 

    <span data-ttu-id="61d96-311">**必要的更新**</span><span class="sxs-lookup"><span data-stu-id="61d96-311">**Required updates**</span></span>

    1. <span data-ttu-id="61d96-312">在根 Web.config 檔案中，加入新 *&lt;appSettings&gt;* 具有索引鍵的項目*webPages:Version*和值*1.0.0.0*。</span><span class="sxs-lookup"><span data-stu-id="61d96-312">In the root Web.config file, add a new *&lt;appSettings&gt;* entry with the key *webPages:Version* and the value *1.0.0.0*.</span></span> 

        [!code-xml[Main](mvc4-release-notes/samples/sample7.xml)]
    2. <span data-ttu-id="61d96-313">在 方案總管 中，以滑鼠右鍵按一下專案名稱，然後選取 卸載專案。</span><span class="sxs-lookup"><span data-stu-id="61d96-313">In Solution Explorer, right-click the project name and then select Unload Project.</span></span> <span data-ttu-id="61d96-314">然後名稱上按一下滑鼠右鍵，然後選取 編輯*ProjectName*.csproj。</span><span class="sxs-lookup"><span data-stu-id="61d96-314">Then right-click the name again and select Edit *ProjectName*.csproj.</span></span>
    3. <span data-ttu-id="61d96-315">找出下列組件參考：</span><span class="sxs-lookup"><span data-stu-id="61d96-315">Locate the following assembly references:</span></span> 

        [!code-xml[Main](mvc4-release-notes/samples/sample8.xml)]

        <span data-ttu-id="61d96-316">它們取代成下列：</span><span class="sxs-lookup"><span data-stu-id="61d96-316">Replace them with the following:</span></span>

        [!code-xml[Main](mvc4-release-notes/samples/sample9.xml)]
    4. <span data-ttu-id="61d96-317">儲存變更，請關閉您先前所編輯，然後以滑鼠右鍵按一下專案並選取重新載入專案 (.csproj) 檔案。</span><span class="sxs-lookup"><span data-stu-id="61d96-317">Save the changes, close the project (.csproj) file you were editing, and then right-click the project and select Reload.</span></span>
- <span data-ttu-id="61d96-318">**ASP.NET MVC 4 專案變更為 4.0 目標從 4.5 不會更新 EntityFramework 組件參考：**如果您變更 ASP.NET MVC 4 專案之後以 4.5 EntityFramework 組件的參考仍會指向目標 4.04.5 版本。</span><span class="sxs-lookup"><span data-stu-id="61d96-318">**Changing an ASP.NET MVC 4 project to target 4.0 from 4.5 does not update the EntityFramework assembly reference:** If you change an ASP.NET MVC 4 project to target 4.0 after targetting 4.5 the reference to the EntityFramework assembly will still point to the 4.5 version.</span></span> <span data-ttu-id="61d96-319">若要修正此問題解除安裝，然後重新安裝 EntityFramework NuGet 封裝。</span><span class="sxs-lookup"><span data-stu-id="61d96-319">To fix this issue uninstall and reinstall the EntityFramework NuGet package.</span></span>
- <span data-ttu-id="61d96-320">**403 禁止從 4.5 變更目標 4.0 之後，在 Azure 上執行 ASP.NET MVC 4 應用程式時：**如果您以 4.5 之後，變更為 4.0 目標的 ASP.NET MVC 4 專案，然後部署至 Azure，您會看到在執行階段 403 禁止錯誤。</span><span class="sxs-lookup"><span data-stu-id="61d96-320">**403 Forbidden when running an ASP.NET MVC 4 application on Azure after changing to target 4.0 from 4.5:** If you change an ASP.NET MVC 4 project to target 4.0 after targetting 4.5 and then deploy to Azure you may see a 403 Forbidden error at runtime.</span></span> <span data-ttu-id="61d96-321">若要解決此問題，請將下列內容加入 web.config:`<modules runAllManagedModulesForAllRequests="true" />`</span><span class="sxs-lookup"><span data-stu-id="61d96-321">To workaround this issue add the following to your web.config: `<modules runAllManagedModulesForAllRequests="true" />`</span></span>
- <span data-ttu-id="61d96-322">**當您輸入時，visual Studio 2012 損毀 '\'字串常值中 Razor 檔案中。**</span><span class="sxs-lookup"><span data-stu-id="61d96-322">**Visual Studio 2012 crashes when you type a '\' in a string literal in a Razor file.**</span></span> <span data-ttu-id="61d96-323">才能解決此問題輸入右引號字串常值的第一次。</span><span class="sxs-lookup"><span data-stu-id="61d96-323">To work around the issue enter the closing quote of the string literal first.</span></span>
- <span data-ttu-id="61d96-324">**瀏覽至&quot;帳戶/管理&quot;網際網路範本結果中的簡體中文、 TRK 和繁體中文語言執行階段錯誤。**</span><span class="sxs-lookup"><span data-stu-id="61d96-324">**Browsing to &quot;Account/Manage&quot; in the Internet template results in a runtime error for CHS, TRK and CHT languages.**</span></span> <span data-ttu-id="61d96-325">若要修正此問題修改頁面，來區隔 *@User.Identity.Name* 做為唯一的內容中將它放入*&lt;強式&gt;*標記。</span><span class="sxs-lookup"><span data-stu-id="61d96-325">To fix the issue modify the page to separate out *@User.Identity.Name* by puting it as the only content within the *&lt;strong&gt;* tag.</span></span>
- <span data-ttu-id="61d96-326">**Google 和 LinkedIn 的提供者不支援在 Azure 網站。**</span><span class="sxs-lookup"><span data-stu-id="61d96-326">**Google and LinkedIn providers are not supported within Azure Web Sites.**</span></span> <span data-ttu-id="61d96-327">部署至 Azure 網站時，請使用替代驗證提供者。</span><span class="sxs-lookup"><span data-stu-id="61d96-327">Use alternative authentication providers when deploying to Azure Web Sites.</span></span>
- <span data-ttu-id="61d96-328">**當使用 UriPathExtensionMapping 具有 IIS 8 Express/IIS 時，您會收到 404 找不到錯誤，當您嘗試使用延伸模組。**</span><span class="sxs-lookup"><span data-stu-id="61d96-328">**When using UriPathExtensionMapping with IIS 8 Express/IIS, you would receive 404 Not Found errors when you try to use the extension.**</span></span> <span data-ttu-id="61d96-329">靜態檔案處理常式會干擾到 web 應用程式開發介面中使用的要求*UriPathExtensionMappings*。</span><span class="sxs-lookup"><span data-stu-id="61d96-329">The static file handler will interfere with requests to web APIs that use *UriPathExtensionMappings*.</span></span> <span data-ttu-id="61d96-330">設定*runAllManagedModulesForAllRequests = true*在 web.config 中若要解決此問題。</span><span class="sxs-lookup"><span data-stu-id="61d96-330">Set *runAllManagedModulesForAllRequests=true* in web.config to work around the issue.</span></span>
- <span data-ttu-id="61d96-331">**不會再呼叫 Controller.Execute 方法。**</span><span class="sxs-lookup"><span data-stu-id="61d96-331">**Controller.Execute method is no longer called.**</span></span> <span data-ttu-id="61d96-332">所有 MVC 控制器現在一律以非同步方式都執行。</span><span class="sxs-lookup"><span data-stu-id="61d96-332">All MVC controllers are now always executed asynchronously.</span></span>
